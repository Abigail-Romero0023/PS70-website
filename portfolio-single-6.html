<!-- /*
* Template Name: Minimal
* Template Author: Untree.co
* Author URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">

  <meta name="description" content="" />
  <meta name="keywords" content="" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=PT+Mono&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesheet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="css/jquery.fancybox.min.css">
  <link rel="stylesheet" href="fonts/icomoon/style.css">
  <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">
  <link rel="stylesheet" href="css/aos.css">
  <link rel="stylesheet" href="css/style.css">

  <title>PS 70</title>
</head>

<body data-spy="scroll" data-target=".site-navbar-target" data-offset="100">


  <div class="site-mobile-menu site-navbar-target">
    <div class="site-mobile-menu-header">
      <div class="site-mobile-menu-close">
        <span class="icofont-close js-menu-toggle"></span>
      </div>
    </div>
    <div class="site-mobile-menu-body"></div>
  </div>
  
  <nav class="site-nav dark mb-5 site-navbar-target">
    <div class="container">
      <div class="site-navigation">
        <a href="index.html" class="logo m-0">PS 70<span class="text-primary">.</span></a>

        <ul class="js-clone-nav d-none d-lg-inline-none site-menu float-right">
          <li><a href="#home-section" class="nav-link active">Home</a></li>
          <li><a href="#portfolio-section">Portfolio</a></li>

          <li class="has-children">
            <a href="#about-section">About</a>
            <ul class="dropdown">
              <li><a href="elements.html">Elements</a></li>
              <li class="has-children">
                <a href="#">Menu Two</a>
                <ul class="dropdown">
                  <li><a href="#">Sub Menu One</a></li>
                  <li><a href="#">Sub Menu Two</a></li>
                  <li><a href="#">Sub Menu Three</a></li>
                </ul>
              </li>
              <li><a href="#">Menu Three</a></li>
            </ul>
          </li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact us</a></li>
        </ul>

        <a href="#" class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-inline-block" data-toggle="collapse" data-target="#main-navbar">
          <span></span>
        </a>

      </div>
    </div>
  </nav>



  


  <div class="untree_co-section untree_co-section-4 pb-0"  id="portfolio-section">
    <div class="container">
      <div class="portfolio-single-wrap unslate_co--section" id="portfolio-single-section">

        <div class="portfolio-single-inner">
          <h2 class="heading-portfolio-single-h2 text-black">Capacitative Sensor for Volume</h2>

          <div class="row mb-5 align-items-stretch">

            <div class="col-lg-6 mb-5 mb-lg-0">
              <img src="IMG_6261.jpeg" alt="Image of capacitative sensor" class="img-fluid">
            </div>

            <div class="col-lg-6 pl-lg-5">
              <div class="row mb-3">
                <div class="col-sm-6 col-md-6 col-lg-6 mb-4">
                  <div class="detail-v1">
                    <span class="detail-label">Project Date</span>
                    <span class="detail-val">March 2nd, 2023</span>
                  </div>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6 mb-4">
                  <div class="detail-v1">
                    <span class="detail-label">Elements</span>
                    <span class="detail-val"><a href="#">Circuitry</a>, <a href="#">Arduino</a></span>
                  </div>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6 mb-4">
                  <div class="detail-v1">
                    <span class="detail-label">Is it cool?</span>
                    <span class="detail-val">Yes</span>
                  </div>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6 mb-4">
                  <div class="detail-v1">
                    <span class="detail-label">Inspiration</span>
                    <span class="detail-val">Nathan's In-Class Demonstration</span>
                  </div>
                </div>
              </div> 
          
              <!-- <div class="custom-block" data-aos="fade-up"> -->
              </ul>
                </ul>
              </div>
            </div>
          </div>
              <div class="custom-block" data-aos="fade-up">
                <h2 class="section-title text-black mb-3">Materials</h2>
                <ul class="list-unstyled ul-check primary">
                  <li>Arduino Uno</li>
                  <li>Breadboard</li>
                  <li>Wires & Alligator Clips</li>
                  <li>Arduino IDE Software</li>
                  <li>Plotting Software</li>
                </ul>
  <h2 class="section-title text-black mb-3">Introduction</h2>
                <div>
                  <p>I really liked Nathan's in-class demonstration of the volume-sensing capacitative sensor. I also wanted to try my hand at tx-rx sensing instead of using a library, so this project was a good fit for me.</p>
          </div>
          <h2 class="section-title text-black mb-3">The Process</h2>
                <div>
                  <p> For this project, I started by building the container that was to hold the water to be sensed. Luckily, the lab has various-sized cups with graduations on the side which were perfect for the job. I then stuck two strips of copper down the sides of the cup, which is where I would power and group the sensor later. See below for a schematic on the sensor!</p>
                  <img src="Note Mar 9, 2023.jpg" width="600" 
                  height="400"  alt="Sensor schematic" />
                  <p>From here, I wired up the circuitry, making sure that my receiving pin was A3 and my transmitting pin was 4 (since this will follow the code I wrote in Kassia's section). </p>
                  <img src="IMG_6262.jpeg" width="400" 
                  height="500"  alt="Circuitry for tx-rx sensor" />
                  <p>Shoutout to Kassia for helping me with this next part--but from here I went on to generate the code that Arduino would be able to read, taking the average of 100 readings in order to return a smoother reading in the serial plotter. In this code, a Capacitor class is also created at the top. The number of samples can be changed from 100 to something greater.</p>
                  <pre><code class="language-arduino">
                    class Capacitor{
                        int tx_pin;  //Top capacitor plate
                        int rx_pin;  //Bottom capacitor plate
                        int high_read; //Read when top plate is charging
                        int low_read; //Read the resulting discharge of the top plate
                        int N_samples = 100;
                        int diff;  //Find the difference between the reading the bottom plate gets when the top plate is charging and then discharges to get the result
                        long result;
                        int tx_state; //Is the top plate charging?
                        unsigned long previousMicros;
                        long capTime; //How long I want the top plate to charge
                      
                        public:
                        Capacitor(int tp, int rp, int interval){  //Declare inputs into my class
                          tx_pin = tp;
                          rx_pin = rp;
                          capTime = interval;
                          previousMicros = 0;
                          
                          pinMode(tx_pin, OUTPUT);
                        }
                        long Update()
                        {
                          unsigned long currentMicros = micros(); //Get current time
                      
                          result = 0; //Reset the result
                      
                          for(int i = 0; i<N_samples; i++){
                            currentMicros = micros(); 
                            digitalWrite(tx_pin,HIGH);
                            tx_state = HIGH;
                            high_read = analogRead(rx_pin); 
                            if((tx_state == HIGH) && (currentMicros - previousMicros >= capTime)){ //If the top plate has been charging and it is now time to discharge
                              previousMicros = currentMicros;
                              digitalWrite(tx_pin,LOW);
                              tx_state = LOW;
                              low_read = analogRead(rx_pin); //See what the bottom plate is reading now
                              diff = high_read - low_read;
                              result += diff;
                            }
                          }
                          return result;
                        }
                      
                      };
                      
                      Capacitor cap1(4,A3,100); //TX on Pin 4, RX on Pin A3, charge the top plate for 100 microseconds
                      int data;
                      
                      void setup() {
                        Serial.begin(9600);
                      }
                      void loop() {
                        // put your main code here, to run repeatedly:
                        data = cap1.Update();
                        Serial.println(data);
                      }
                      
                  </code>
                  <p> I then turned to calibrating my sensor, by slowly pouring in different increments of known volume. See below for a plot of the data.</p>
                  <img src="desmos_plotting.jpg" width="800" 
                  height="500"  alt="plot" />
                  <h2 class="section-title text-black mb-3">Multimeter Readings</h2>
                  <div>
                    <p>I used a multimeter to measure the current going from the potentiometer to the motor, when the potentiometer was turned all the way up. I expected this to be ~5 V, and got 5.13 V. I measured that the current was 422 mA. From here, I use Ohm's Law to determine that 5.13 V / 422 mA = 12 Ω of resistance. Nice!</p>
                    <img src="IMG_6175.jpeg" width="200" 
                  height="300"  alt="Measuring with Multimeter" />
          </div>
        </div>
      </div>
    </div>

    <div class="site-footer">
      <div class="container">

        <div class="row">
          <div class="col-lg-3">
            <div class="widget">
              <h3>Home</h3>
              <ul class="list-unstyled float-left links">
                <li><a href="#">Untree.co</a></li>
                <li><a href="#">About us</a></li>
                <li><a href="#">Projects</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Terms</a></li>
                <li><a href="#">Privacy</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->

          <div class="col-lg-3">
            <div class="widget">
              <h3>Projects</h3>
              <ul class="list-unstyled float-left links">
                <li><a href="#">HTML5</a></li>
                <li><a href="#">CSS3</a></li>
                <li><a href="#">Untree.co</a></li>
                <li><a href="#">Free Templates</a></li>
                <li><a href="#">WordPress Themes</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->

          <div class="col-lg-3">
            <div class="widget">
              <h3>Services</h3>
              <ul class="list-unstyled float-left links">
                <li><a href="#">Untree.co</a></li>
                <li><a href="#">jQuery</a></li>
                <li><a href="#">Bootstrap</a></li>
                <li><a href="#">Freebies</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->


          <div class="col-lg-3">
            <div class="widget">
              <h3>Contact</h3>
              <address>43 Raymouth Rd. Baltemoer, London 3910</address>
              <ul class="list-unstyled links mb-4">
                <li><a href="tel://11234567890">+1(123)-456-7890</a></li>
                <li><a href="tel://11234567890">+1(123)-456-7890</a></li>
                <li><a href="mailto:info@mydomain.com">info@mydomain.com</a></li>
              </ul>

              <h3>Connect</h3>
              <ul class="list-unstyled social">
                <li><a href="#"><span class="icon-instagram"></span></a></li>
                <li><a href="#"><span class="icon-twitter"></span></a></li>
                <li><a href="#"><span class="icon-facebook"></span></a></li>
                <li><a href="#"><span class="icon-linkedin"></span></a></li>
                <li><a href="#"><span class="icon-pinterest"></span></a></li>
                <li><a href="#"><span class="icon-dribbble"></span></a></li>
              </ul>

            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->

        </div> <!-- /.row -->





        <div class="row mt-5">
          <div class="col-12 text-center">
            <p class=" mb-0">&copy; 2020. All Rights Reserved. Design by <a href="https://untree.co/" target="_blank" class=""><strong>Untree.co</strong></a></p>
            <p class="">
              <span class="mx-2">Twitter <a href="https://twitter.com/untree_co">@Untree_co</a></span>
              <span>&bullet;</span>
              <span class="mx-2">Facebook <a href="https://web.facebook.com/Untree.co">@Untree.co</a></span>
            </p>

          </div>
        </div>
      </div> <!-- /.container -->
    </div> <!-- /.site-footer -->


    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/wave-animate.js"></script>
    <script src="js/circle-progress.js"></script>
    <script src="js/imagesloaded.pkgd.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="js/ScrollMagic.min.js"></script>
    <script src="js/scrollmagic.animation.gsap.min.js"></script>

    <script src="js/custom.js"></script>
    
  </body>

  </html>